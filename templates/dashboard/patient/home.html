{% extends 'dashboard/base.html' %}


{% load static %}

{% block styles %}
    <link rel="stylesheet" href={% static "bootstrap-calendar/css/calendar.min.css" %}>
    <link rel="stylesheet" href="{% static "css/home.css" %}">
{% endblock %}

{% block options %}
    <li class="active">
        <a href="#Home"><i class="fa fa-fw fa-dashboard"></i> Dashboard</a>
    </li>
    <li>
        <a href="#CalendarSection"><i class="fa fa-fw fa-calendar"></i> Appointments</a>
    </li>

    <li>
        <a href="#Prescription"><i class="fa fa-fw fa-address-book"></i> Prescriptions</a>
    </li>
    <li>
        <a href="/patient_info/{{ object.id }}/"><i class="fa fa-fw fa-plus-square"></i> Medical Info and Tests</a>
    </li>

    <li>
        <a href="javascript:;" data-toggle="collapse" data-target="#demo"><i class="fa fa-fw fa-user"></i> Account Information <i class="fa fa-fw fa-caret-down"></i></a>
        <ul id="demo" class="collapse">
            <li>
                <a href="patient_update_information/"><i class="fa fa-fw fa-info-circle"></i> Profile Information</a>
            </li>
            <li>
                <a href="patient_medical_information/"><i class="fa fa-fw fa-user-md"></i> Medical Information</a>
            </li>
        </ul>
    </li>
{% endblock %}

{% block content %}
<!------------------------------------------------------------ Modals -------------------------------------------------->

    {% include 'dashboard/patient/createAppointmentModal.html' %}


    <!------------------------------------------------------------ Content -------------------------------------------------->

    <!-- Page Heading -->
    <div id="Home" class="row">
        <div class="col-lg-12">
            <h1 class="page-header">
                {{ user.first_name }} {{ user.last_name }}'s Dashboard
            </h1>
            <ol class="breadcrumb">
                <li class="active">
                    <i class="fa fa-bell"></i> Notifications
                </li>
            </ol>
        </div>
    </div>
    <!-- /.row -->

    <div class="row">
        <div class="col-lg-12">
            {% if notification %}
            <div class="alert alert-info alert-dismissable">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>


                <i class="fa fa-info-circle"></i>  <strong>
                    Welcome to HealthNet. We see that you haven't completely updated your medical info. It is highly recommended to do this as soon as possible. <a href="patient_medical_information/"> To do this now, click here.</a> </strong>
            </div>
            {% endif %}
        </div>
    </div>
    <!-- /.row -->

    <div class="row">
        <div class="col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-envelope fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge" id="messages_count">0</div>
                            <div>New Messages!</div>
                        </div>
                    </div>
                </div>
                <a href="{% url 'messages_inbox' %}">
                    <div class="panel-footer">
                        <span class="pull-left">View Messages</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>

        <div class="col-md-4">
            <div class="panel panel-green">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-calendar fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge" id="number_appointments">0</div>
                            <div>Appointments in the Next Month!</div>
                        </div>
                    </div>
                </div>
                <a href="#appointmentslist">
                    <div class="panel-footer">
                        <span class="pull-left">View Details</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>

        <div class="col-md-4">
            <div class="panel panel-yellow">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-heartbeat fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge" id="presc_n">0</div>
                            <div>New Prescriptions!</div>
                        </div>
                    </div>
                </div>
                <a href="#Prescription">
                    <div class="panel-footer">
                        <span class="pull-left">View Details</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <!-- /.row -->

    <div id="CalendarSection" class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="fa fa-calendar-o fa-fw"></i>Appointments Calendar</h3>
                </div>
                <div class="panel-body calendar-body">
                    <div class="row">
                    <div class="pull-right form-inline calendar-buttons">
                        <div class="btn-group">
                            <button class="btn btn-primary" data-calendar-nav="prev"><i class="fa fa-arrow-left"></i> Prev</button>
                            <button class="btn" data-calendar-nav="today">Today</button>
                            <button class="btn btn-primary" data-calendar-nav="next">Next <i class="fa fa-arrow-right"></i></button>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-primary" data-calendar-view="year">Year</button>
                            <button class="btn btn-primary" data-calendar-view="month">Month</button>
                            <button class="btn btn-primary active" data-calendar-view="week">Week</button>
                            <button class="btn btn-primary" data-calendar-view="day">Day</button>
                        </div>
                    </div>
                        <h3>Text</h3>
                </div>
                    <div class="row">
                    <div id="calendar"></div>
                        </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /.row -->


    <!-- <div class="row">
         <div class="col-lg-6">
             <div class="panel panel-default">
                 <div class="panel-heading">
                     <h3 class="panel-title"><i class="fa fa-long-arrow-right fa-fw"></i> Donut Chart</h3>
                 </div>
                 <div class="panel-body">
                     <div id="morris-donut-chart"></div>
                     <div class="text-right">
                         <a href="#">View Details <i class="fa fa-arrow-circle-right"></i></a>
                     </div>
                 </div>
             </div>
         </div> -->


    <div name="UpcomingAppointments" class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title"><i class="fa fa-clock-o fa-fw"></i> Upcoming Appointments </h3>
            </div>
            <div class="panel-body">

                <div class="list-group" id="appointmentslist">
                </div>

                <div class="text-right">
                    <a id="get_appointment" data-toggle="modal" data-target="#createAppointment"><i class="fa fa-calendar-plus-o fa-fw"></i> Request New Appointment <i class="fa fa-arrow-circle-right"></i></a>
                </div>
            </div>
        </div>
    </div>


    <div id="Prescription" class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title"><i class="fa fa-plus-square fa-fw"></i> Prescriptions</h3>
            </div>
            <div class="panel-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover table-striped">
                        <thead>
                        <tr>
                            <th>Medication</th>
                            <th>Refills</th>
                            <th>Date of Expiration</th>
                        </tr>
                        </thead>
                        <tbody id="presc_body">
                        <tr>
                            <td>Ibuprofen 200mg</td>
                            <td>10</td>
                            <td>12/12/2017</td>
                        </tr>
                        <tr>
                            <td>Notrealitinis 900mg</td>
                            <td>0</td>
                            <td>6/12/2017</td>
                        </tr>
                        <tr>
                            <td>HIV Medication 200mg</td>
                            <td>Infinite</td>
                            <td>Never</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div class="text-right">
                    <a href="#">See more <i class="fa fa-arrow-circle-right"></i></a>
                </div>
            </div>
        </div>

        <!-- <div class="col-lg-6">
             <div class="panel panel-default">
                 <div class="panel-heading">
                     <h3 class="panel-title"><i class="fa fa-money fa-fw"></i> Transactions Panel</h3>
                 </div>
                 <div class="panel-body">
                     <div class="table-responsive">
                         <table class="table table-bordered table-hover table-striped">
                             <thead>
                                 <tr>
                                     <th>Order #</th>
                                     <th>Order Date</th>
                                     <th>Order Time</th>
                                     <th>Amount (USD)</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <tr>
                                     <td>3326</td>
                                     <td>10/21/2013</td>
                                     <td>3:29 PM</td>
                                     <td>$321.33</td>
                                 </tr>
                                 <tr>
                                     <td>3325</td>
                                     <td>10/21/2013</td>
                                     <td>3:20 PM</td>
                                     <td>$234.34</td>
                                 </tr>
                                 <tr>
                                     <td>3324</td>
                                     <td>10/21/2013</td>
                                     <td>3:03 PM</td>
                                     <td>$724.17</td>
                                 </tr>
                                 <tr>
                                     <td>3323</td>
                                     <td>10/21/2013</td>
                                     <td>3:00 PM</td>
                                     <td>$23.71</td>
                                 </tr>
                                 <tr>
                                     <td>3322</td>
                                     <td>10/21/2013</td>
                                     <td>2:49 PM</td>
                                     <td>$8345.23</td>
                                 </tr>
                                 <tr>
                                     <td>3321</td>
                                     <td>10/21/2013</td>
                                     <td>2:23 PM</td>
                                     <td>$245.12</td>
                                 </tr>
                                 <tr>
                                     <td>3320</td>
                                     <td>10/21/2013</td>
                                     <td>2:15 PM</td>
                                     <td>$5663.54</td>
                                 </tr>
                                 <tr>
                                     <td>3319</td>
                                     <td>10/21/2013</td>
                                     <td>2:13 PM</td>
                                     <td>$943.45</td>
                                 </tr>
                             </tbody>
                         </table>
                     </div>
                     <div class="text-right">
                         <a href="#">View All Transactions <i class="fa fa-arrow-circle-right"></i></a>
                     </div>
                 </div>
             </div>
         </div> -->
    </div>
    <!-- /.row -->
{% endblock %}

{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.1/jquery.form.min.js" integrity="sha384-tIwI8+qJdZBtYYCKwRkjxBGQVZS3gGozr3CtI+5JF/oL1JmPEHzCEnIKbDbLTCer" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script type="text/javascript" src={% static "bootstrap-calendar/js/calendar.js" %}></script>
    <script type="text/javascript">

        var calendar = $("#calendar").calendar(
            {
                tmpl_path: "{% static "bootstrap-calendar/tmpls/" %}",
                events_source: '/accounts/view_apt',
                modal: "#editAppointment",
                onAfterViewLoad: function(view) {
                    $('.calendar-body h3').text(this.getTitle());
                    $('.btn-group button').removeClass('active');
                    $('button[data-calendar-view="' + view + '"]').addClass('active');
                },
            });

        $('.btn-group button[data-calendar-view]').each(function() {
            var $this = $(this);
            $this.click(function() {
                calendar.view($this.data('calendar-view'));
            });
        });

        $('.btn-group button[data-calendar-nav]').each(function() {
            var $this = $(this);
            $this.click(function() {
                calendar.navigate($this.data('calendar-nav'));
            });
        });

    </script>
    <script type="text/javascript" src="{% static "js/home_patient.js" %}"></script>
    <script type="text/javascript" src="{% static "js/messages.js" %}"></script>
    <script type="text/javascript" src="{% static "js/populate_prescriptions.js" %}"></script>

{% endblock %}